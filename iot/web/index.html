<!DOCTYPE html>
<html>
<head>

<title>IoT</title>  

<!-- Style -->
<style type="text/css">
body {
    margin: 0px;
    overflow: hidden;
    padding: 0px;
}

.count {
    font-family: sans-serif;
    font-size: 92px;
    line-height: 92px;
    opacity: 0;
    position: absolute;
    text-align: center;
    transform-origin: 50% 50%;
    -webkit-transform-origin: 50% 50%;
}
</style>
  
<!-- Gateway -->
<script src="gateway.js" type="text/javascript"></script>  
  
<!-- Animation -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.11.5/TweenMax.min.js"></script>  
  
<!-- Application -->
<script type="text/javascript">
var KAAZING_ID = 'd71dfe3a-818e-4f9c-8af6-fb81649d9a6d';
var IOT_TOPIC = 'iot_topic';

var kaazing = null;  
  
function doGatewayConnect() {
  console.log( 'Client connected.' );
  
  kaazing.on( Gateway.EVENT_MESSAGE, doGatewayMessage );
  kaazing.subscribe( IOT_TOPIC );  
}
  
function doGatewayMessage( message ) {
  var display = null;  
  
  console.log( message );  
  
  // Update counter display
  // Animate for emphasis using CSS transform
  display = document.querySelector( ".count" );
  display.innerHTML = message;
  
  TweenMax.to( display, 1, {
    opacity: 1,
    scale: Math.ceil( window.innerHeight / display.clientHeight ),
    startAt: {
      left: Math.round( ( window.innerWidth - display.clientWidth ) / 2 ),
      opacity: 0,
      scale: 1,
      top: Math.round( ( window.innerHeight - display.clientHeight ) / 2 )
    }
  } );  
}
  
function doWindowLoad() {
  kaazing = Gateway.connect( KAAZING_ID, doGatewayConnect );
}
  
// Listen for page to load
window.addEventListener( "load", doWindowLoad );
</script>
  
</head>
<body>

<!-- Show the current count -->
<div class="count">0</div>
    
</body>
</html>
