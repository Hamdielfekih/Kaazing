<!DOCTYPE html>
<html lang="en">
<head>

<!-- ### -->
<!-- Must be served by web server -->  
<!-- ### -->
  
<title>IoT Skeleton</title>

<!-- Gateway -->  
<script src="gateway.js" type="text/javascript"></script>  

<!-- Application -->
<script type="text/javascript">
// Constants  
var IOT_TOPIC = 'skeleton_topic';
var KAAZING_ID = 'd71dfe3a-818e-4f9c-8af6-fb81649d9a6d';
  
// Application
var kaazing = null;  
  
// Called when connected to Gateway
// Subscribe to topic
function doGatewayConnect()
{
  console.log( 'Client connected.' );
  
  // Subscribe
  kaazing.on( Gateway.EVENT_MESSAGE, doGatewayMessage );
  kaazing.subscribe( IOT_TOPIC );    
}
  
// Called when message arrives
function doGatewayMessage( message )
{
    console.log( 'Message: ' + message );
}
  
// Called when document is loaded
// Connect to Gateway
function doWindowLoad()
{
  console.log( 'Document loaded.' );
  kaazing = Gateway.connect( KAAZING_ID, doGatewayConnect );
}
  
// Listen for document to load
window.addEventListener( 'load', doWindowLoad );  
</script>  
  
</head>
<body style="padding: 50px;">

<!-- Empty -->  
  
</body>
</html>
